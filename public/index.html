<html>
<head>

</head>



<body>

<form action='/shorten' method='POST' id='urlForm'>
    Test: <input type='text' id='urltoLengthen'></input>

    <input type="submit" value="Submit">
</form>

<textarea id='newUrl'></textarea>

    
</body>

<script>
    document.querySelector("#urlForm").addEventListener("submit", async (e) => {
        e.preventDefault(); 
        const value = document.getElementById('urltoLengthen').value;

        const lengthenedUrl = await fetch('/shorten', {
            method: 'POST',
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
            },
            body: JSON.stringify({url: value})
        });
        const {data} = await lengthenedUrl.json();
        console.log(data);
        document.getElementById('newUrl').value = data.lengthenedUrl;
    });
</script>

</html>